{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>\\n      Escáner básico.\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-card-content ion-item *ngFor=\\\"let device of devices\\\">\\n      <p>{{device.name || 'Unnamed'}}</p>\\n      <p>{{device.id}}</p>\\n      <p> RSSI: {{device.rssi}}</p>\\n    </ion-card-content>\\n    <p>{{testMessage}}</p>\\n  </ion-list>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"start\\\" slot=\\\"fixed\\\">\\n    <ion-button (click)=\\\"singleMode()\\\"> Single </ion-button>\\n  </ion-fab>\\n\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button [color]='scanStatus ? \\\"danger\\\" : \\\"primary\\\"' (click)=\\\"onScanClicked()\\\">\\n      <ion-icon [name]='scanStatus ? \\\"pause\\\" : \\\"play\\\"' style=\\\"font-size: 25px;\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\"","import { Component, NgZone } from '@angular/core';\nimport { BLE } from '@ionic-native/ble/ngx';\nimport { HTTP } from '@ionic-native/http/ngx';\nimport { NavController } from '@ionic/angular';\nimport { DataSharingService } from '../data-sharing.service';\nimport { BackgroundGeolocation, BackgroundGeolocationConfig, BackgroundGeolocationResponse, BackgroundGeolocationEvents } from '@ionic-native/background-geolocation/ngx';\nimport { interval, concat } from 'rxjs';\nimport { DatePipe } from '@angular/common';\nimport { File } from '@ionic-native/file/ngx';\nimport { EmailComposer } from '@awesome-cordova-plugins/email-composer/ngx';\n\n\nexport type postDataTemplate = {\n    type: 'Feature';\n    properties: {\n      desc: 'A GeoJSON';\n      session: number;\n      ns: number;\n      timestamp: Date;\n      beacons: string[];\n    },\n    geometry: {\n      type: 'Point';\n      coordinates: [number, number]\n    }\n}\n\nexport type myConfig = {\n  ID: number;\n  UUID: string;\n  work: number;\n  scan: number;\n  api: string;\n  mail: string;\n}\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n\n  devices = [];\n  public myCfg;\n  latitud = 0;\n  longitud = 0;\n  scanStatus: boolean = false;\n  intervalo: any;\n  timestamp: any;\n  ns = 0;\n  workingStatus = false;\n  workingTime = 0;\n  scanTime = 0;\n  controller = 0 ;\n  devMACs: any;\n  private blob: Blob;\n  singleController = false;\n  testMessage: string = '';\n  \n  constructor(private email: EmailComposer, private file: File, public datepipe: DatePipe, private ble:BLE,private ngZone: NgZone, public navCtrl: NavController, private http: HTTP, public data: DataSharingService, private bgGeolocation: BackgroundGeolocation) \n  {\n    this.data.dataModifications.subscribe( data => {\n      this.myCfg = data;\n    });\n  }\n\n  ngOnInit(){\n\n\n    this.workingTime = parseInt(this.myCfg.wCycle);\n    this.scanTime = parseInt(this.myCfg.sCycle);\n\n    this.http.setHeader('*', 'Access-Control-Allow-Origin', '*');\n\n    this.http.setHeader('*', 'Access-Control-Allow-Methods', 'POST, GET, OPTIONS, PUT, PATCH');\n\n    this.http.setHeader('*', 'Accept', 'application/json');\n\n    this.http.setHeader('*', 'content-type', 'application/json');\n\n    this.http.setHeader('*', 'origin', '*');\n\n    this.http.setHeader('*', 'x-requested-width', '*');\n\n    this.http.setDataSerializer('json');\n\n    this.file.createFile(this.file.dataDirectory, 'logger.txt', true);\n\n    const config: BackgroundGeolocationConfig={\n      desiredAccuracy: 10,\n      distanceFilter: 5,\n      debug: false,\n      stopOnTerminate: false,\n      startOnBoot: true,\n      url: '',\n      postTemplate: {\n        id: '',\n        lat: '@latitude',\n        lng: '@longitude',\n        test: '1'\n      }\n    };\n    this.bgGeolocation.configure(config).then(() => {\n      this.bgGeolocation.on(BackgroundGeolocationEvents.location).subscribe((location: BackgroundGeolocationResponse) => {\n        console.log(location);\n        this.latitud = location.latitude;\n        this.longitud = location.longitude;\n        this.appendLog(Date.now() + ': Calling geolocation task...\\n');\n        this.bgGeolocation.finish();\n      });\n    });\n\n    this.bgGeolocation.start();\n\n    this.appendLog(Date.now() + ': Geolocation is ready...\\n');\n  }\n\n\n  public onScanClicked(): void {\n    if (!this.scanStatus) {\n      this.appendLog(Date.now() + ': ---------------------------------------------------------------- \\n');\n      this.appendLog(Date.now() + ': STARTING NEW LOG \\n');\n      this.appendLog(Date.now() + ': ---------------------------------------------------------------- \\n');\n      this.startScanning();\n      this.devMACs = [];\n      this.devices = [];\n      this.testMessage = '';\n      this.scanStatus = true;\n    } else {\n      this.appendLog(Date.now() + ': STOPPING LOGGER \\n');\n      this.scanStatus = false;\n      this.workingStatus = false;\n      this.stopScanning();\n    }\n  }\n\n  async appendLog(logMsg: string) {\n    this.blob = new Blob([logMsg], {type: 'text/plain'});\n\n    await this.file.writeFile(this.file.dataDirectory, 'logger.txt', this.blob, {append: true, replace: false});\n  }\n\n  async startScanning(){\n\n    this.appendLog(Date.now() + ': Scanning...\\n');\n    await this.ble.scan([], this.scanTime).subscribe(\n       async device => await this.onDeviceDiscovered(device)\n    );\n\n\n\n   if(this.controller === 0){\n     this.controller++;\n     this.workingStatus = true;\n     this.workingState();\n   }\n\n  }\n\nasync workingState(){\n\n  this.intervalo = interval(1000 * this.workingTime).subscribe(async (values) => {\n    this.appendLog(Date.now() + ': Starting Work-Cycle iteration...\\n');\n    this.startScanning();\n    let myDate = new Date();\n    this.timestamp = this.datepipe.transform(myDate, 'yyyy/MM/dd-hh:mm:ss', 'UTC +2');\n\n\n    this.devMACs = await this.devices.map(function (e) {\n      return e.id;\n    });\n\n    if(this.latitud != 0 && this.longitud != 0 && this.devices.length > 0){\n      await this.http.sendRequest(this.myCfg.API, {\n        method: 'post',\n        data: {\n          \"type\": 'Feature',\n          \"properties\": {\n            \"desc\": 'A GeoJSON',\n            \"session\": this.myCfg.ID,\n            \"ns\": this.ns,\n            \"timestamp\": this.timestamp,\n            \"beacons\": this.devMACs\n          },\n          \"geometry\": {\n            \"type\": 'Point',\n            \"coordinates\": [this.latitud, this.longitud]\n          }\n        }\n      }).then(response => {\n        if(response){\n          console.log(response);\n          this.ns++;\n          this.devMACs = [];\n          this.devices = [];\n          this.appendLog(Date.now() + ': Scan result sent...\\n');\n        }\n      }).catch(response => {\n        console.log(response);\n        console.log(response.error);\n      });\n    } else {\n      if(this.devices.length > 0){\n        this.appendLog(Date.now() + ': Awaiting Geolocation Engine initialization... \\n');\n        this.devices = [];\n        this.devMACs = [];\n      } else {\n        this.appendLog(Date.now() + ': No devices detected in this iteration, did not send anything...\\n');\n      }\n    }\n    this.appendLog(Date.now() + ': Finished Work-Cycle iteration...\\n')\n    });\n}\n\n\n  onDeviceDiscovered(device){\n    this.ngZone.run(async ()=>{\n        console.log('HERE comes the full device');\n        console.log(device);\n        this.appendLog(Date.now() + ': Device found, applying filter... \\n');\n        const uuidArray = new Uint8Array(device.advertising);\n        let fixedIndex = 0;\n        let isIBeacon = false;\n        await uuidArray.forEach((elem, index) => {\n          if(elem === 26){\n            if(uuidArray[index + 1] === 255 && uuidArray[index + 2] === 76 && uuidArray[index + 3] === 0){\n              isIBeacon = true;\n              fixedIndex = index+6;\n            }\n          }\n        });\n        console.log(fixedIndex);\n        const fixedArray =  [];\n        if(isIBeacon){\n           for(let i = fixedIndex; i < fixedIndex + 16; i++){\n            if(uuidArray[i] < 10){\n              fixedArray.push(\n               '0' + uuidArray[i].toString(16)\n              );\n            } else\n            fixedArray.push(\n              uuidArray[i].toString(16)\n            );\n          }\n          console.log('MY UUID ARRAY: ');\n          console.log(fixedArray);\n          if(fixedArray.join('') === this.myCfg.UUID.replace(/-/g, '')){\n            this.devices.push(device);\n            this.appendLog(Date.now() + ': Found: -' +device.name+ '\\n');\n          }\n        }\n    })\n  }\n\n   stopScanning() {\n    this.appendLog(Date.now() + ': Stopping scan and work cycle...\\n');\n    this.intervalo.unsubscribe();\n    this.controller = 0;\n    this.sendEmail();\n   } \n  \n   async sendEmail(){\n    let email = {\n      to: this.myCfg.mail,\n      cc: this.myCfg.mail,\n      attachments: [\n        this.file.dataDirectory+'/logger.txt'\n      ],\n      subject: 'iBeacon Scanner Log - '+Date.now(),\n      body: '',\n      isHTML: true\n    }\n\n    if(email.cc !== '' || email.to !== ''){\n      await this.email.open(email);\n    }\n   }\n\n   async ngOnDestroy(){\n    await this.bgGeolocation.stop();\n    await this.file.removeFile(this.file.dataDirectory, 'logger.txt');\n   }\n\n   async singleMode(){\n    this.ble.startScan([]).subscribe(\n      device => this.onDeviceDiscovered(device)\n    )\n\n    setTimeout(() => {\n      this.ble.stopScan().then(async () => {\n        let myDate = new Date();\n      this.timestamp = this.datepipe.transform(myDate, 'yyyy/MM/dd-hh:mm:ss a', 'UTC +2');\n   \n       console.log(this.devices);\n       this.devMACs = this.devices.map((e) => {\n        return e.id;\n      });\n      console.log(this.devMACs);\n      if(this.devMACs.length > 0){\n       await this.http.sendRequest(this.myCfg.API, {\n         method: 'post',\n         data: {\n           \"type\": 'Feature',\n           \"properties\": {\n             \"desc\": 'A GeoJSON',\n             \"session\": this.myCfg.ID,\n             \"ns\": this.ns,\n             \"timestamp\": this.timestamp,\n             \"beacons\": this.devMACs\n           },\n           \"geometry\": {\n             \"type\": 'Point',\n             \"coordinates\": [this.latitud, this.longitud]\n           }\n         }\n       }).then(response => {\n         if(response){\n           console.log(response);\n           this.ns++;\n           this.devMACs = [];\n           this.testMessage = 'Single test Done!';\n           this.appendLog(Date.now() + ': Scan result sent successfully...\\n');\n         }\n       }).catch(response => {\n         console.log(response);\n         console.log(response.error);\n       });\n      }\n      })\n    }, this.scanTime*1000)\n  }\n}\n"],"sourceRoot":""}